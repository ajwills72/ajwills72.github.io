{
    "contents" : "print('DAU: SYD2')\nprint('Jessica Lee')\nprint('2014-11-27')\nprint('Loading \"ez\" package for ANOVA...')\nlibrary(ez)\nprint('Loading raw data and preprocessing...')\n\n#### Shanks-Darby training - preprocessing\ndata.train <- read.table(\"syd2dataTRAIN.txt\", header=TRUE, sep=\"\\t\")\n# Make data fram slightly more human readable.\ndata.train$group[data.train$group == 2] <- 'nohint'\ndata.train$group[data.train$group == 3] <- 'hint'\nletcodes1 <- factor(c('A','B','AB','C','D','CD','E','F','EF','G','H','GH',\n                     'I','J','KL','M','N','OP'))\ndata.train$stimtype <- letcodes1[ match(data.train$stimtype, 1:18)]\n# Create a new column with actual bet\ndata.train$bet <- abs(data.train$acc)\n# Create a new column with 'accuracy' \n# (correct if bet 100 on win trial, or bet 1 on lose trial\n# incorrect otherwise) \ndata.train$accur <- 0\ndata.train$accur[data.train$outcome == 1 & data.train$resp == 3] <- 1\ndata.train$accur[data.train$outcome == 2 & data.train$resp == 1] <- 1\ndata.train$accur[data.train$resp == 2] <- 0.5 # I added\n# Calculate overall win/loss by participant\ntally <- aggregate(data.train$acc,list(data.train$group,data.train$subj),sum)\ncolnames(tally) <- c('group', 'subj', 'tally')\n# Define failing participants as those with a non-negative tally\nfail <- tally[tally$tally < 0,]\n# Remove non-passing participants from data set\ndata.train <- data.train[!(data.train$subj %in% fail$subj),]\n\n#### Shanks-Darby ratings - preprocessing\ndata.rats <- read.table(\"syd2dataRATS.txt\", header=TRUE, sep=\"\\t\")\n# Make data fram slightly more human readable.\ndata.rats$group[data.rats$group == 2] <- 'nohint'\ndata.rats$group[data.rats$group == 3] <- 'hint'\nletcodes2 <- factor(c('A','B','AB','C','D','CD','E','F','EF','G','H','GH',\n                      'I','J','KL','M','N','OP',\n                      'IJ','K','L','MN','O','P'))\ndata.rats$stimtype <- letcodes2[ match(data.rats$stimtype, 1:24)]\n\n# Convert contingency ratings to be out of 100\ndata.rats$rating <- data.rats$rating/6\n\n# Add column classifying stimulus as 'familiar win', 'familiar no win', or 'novel'.\nletcat <- factor(c('win','win','nowin','nowin','nowin','win','win','win','nowin','nowin','nowin','win',\n                      'win','win','nowin','nowin','nowin','win',\n                      'novel','novel','novel','novel','novel','novel'))\ndata.rats$coroutcome <- letcat[ match(data.rats$stimtype, letcodes2)]\n\n# Remove non-passing participants from data set\ndata.rats <- data.rats[!(data.rats$subj %in% fail$subj),]\n\nprint('Commencing analyses...')\n\nprint('SHANKS-DARBY TRAINING')\n\nprint('Terminal accuracy by group')\nblockacc <- aggregate(data.train$accur,list(data.train$subj,data.train$group,data.train$block),mean)\ncolnames(blockacc) <- c('subj', 'group', 'block', 'termacc')\ntermacc <- subset(blockacc,block==6)\nprint(t.test(termacc~group, data=termacc, paired=FALSE))\n\nprint('SHANKS-DARBY RATINGS')\n\nprint('Familiar item performance: ANOVA')\nfamiliar.rats <- data.rats[data.rats$coroutcome != 'novel',]\n\n# Calculating difference in rating for familiar win (+) and no win (-) cues\nfamiliartest <- aggregate(familiar.rats$rating,\n                          list(familiar.rats$subj,familiar.rats$group,familiar.rats$coroutcome)\n                          ,mean)\ncolnames(familiartest) <- c('subj', 'group', 'coroutcome', 'rating')\nprint(ezStats(data=familiartest, dv=rating, wid=subj, within=coroutcome, between=group,type=3))\nprint(ezANOVA(data=familiartest, dv=rating, wid=subj, within=coroutcome, between=group,type=3))\nprint('Familiar item: Hint condition')\nfam.hint <- subset(familiartest, group == 'hint')\nprint(t.test(rating~coroutcome, data=fam.hint,paired=TRUE))\nprint('Familiar item: No hint condition')\nfam.hint <- subset(familiartest, group == 'hint')\nprint(t.test(rating~coroutcome, data=fam.hint,paired=TRUE))\n\nprint('IJ v MN: ANOVA')\nijmn <- subset(data.rats, stimtype == 'IJ' | stimtype == 'MN')\nprint(ezStats(data=ijmn, dv=rating, wid=subj, within=stimtype, between=group,type=3))\nprint(ezANOVA(data=ijmn, dv=rating, wid=subj, within=stimtype, between=group,type=3))\nprint('IJ vs MN: hint condition')\nijmn.hint <- subset(ijmn, group == 'hint')\nprint(t.test(rating~stimtype, data=ijmn.hint,paired=TRUE))\nprint('IJ vs MN: no hint condition')\nijmn.nohint <- subset(ijmn, group == 'nohint')\nprint(t.test(rating~stimtype, data=ijmn.nohint,paired=TRUE))\n\nprint('K/L v O/P: ANOVA')\n# Combine K/L and O/P\nklop <- subset(data.rats, stimtype == 'K' | stimtype == 'L' | stimtype == 'O' | stimtype == 'P' )\nklop$klop[klop$stimtype == 'K'] <- 'K/L'\nklop$klop[klop$stimtype == 'L'] <- 'K/L'\nklop$klop[klop$stimtype == 'O'] <- 'O/P'\nklop$klop[klop$stimtype == 'P'] <- 'O/P'\nklop <- aggregate(klop$rating,list(klop$subj,klop$group,klop$klop),mean)\ncolnames(klop) <- c('subj','group','stimtype','rating')\n# Do the ANOVA\nprint(ezStats(data=klop, dv=rating, wid=subj, within=stimtype, between=group,type=3))\nprint(ezANOVA(data=klop, dv=rating, wid=subj, within=stimtype, between=group,type=3))\nprint('K/L vs O/P: hint condition')\nklop.hint <- subset(klop, group == 'hint')\nprint(t.test(rating~stimtype, data=klop.hint,paired=TRUE))\nprint('K/L vs O/P: no hint condition')\nklop.nohint <- subset(klop, group == 'nohint')\nprint(t.test(rating~stimtype, data=klop.nohint,paired=TRUE))\n\nprint('Rule-following index')\nij <- ijmn[ijmn$stimtype == 'IJ',]\nmn <- ijmn[ijmn$stimtype == 'MN',]\nknl <- klop[klop$stimtype == 'K/L',]\nonp <- klop[klop$stimtype == 'O/P',]\nrfi <- ij\nrfi$rfi <- ( mn$rating - ij$rating + knl$rating - onp$rating ) / 2\nprint('RFI: Hint versus no hint')\nprint(aggregate(rfi$rfi,list(rfi$group),mean))\nprint(t.test(rfi~group,data=rfi,paired=TRUE))\nprint('RFI: Hint versus ZERO')\nrfi.hint <- rfi[rfi$group=='hint',]\nprint(t.test(rfi.hint$rfi,mu=0))\nprint('RFI: No hint versus ZERO')\nrfi.nohint <- rfi[rfi$group=='nohint',]\nprint(t.test(rfi.nohint$rfi,mu=0))\n",
    "created" : 1417089433951.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1809542868",
    "id" : "5F82E2A8",
    "lastKnownWriteTime" : 1417170223,
    "path" : "~/Dropbox/PROJECTS/PROJECTS/DAUs/SYD_2 Jee Lee Shanks Darby/syd2willslab/syd2analysis.R",
    "project_path" : "syd2analysis.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}